{
  "config": {
    "step": {
      "user": {
        "title": "Sugar Valley NeoPool Configuration",
        "description": "Configure your NeoPool device connected via Tasmota MQTT.\n\nFor more information, see the [Tasmota NeoPool documentation]({docs_url}).",
        "data": {
          "device_name": "Device Name",
          "discovery_prefix": "Tasmota Device Topic (e.g., SmartPool)"
        },
        "data_description": {
          "device_name": "A friendly name for your pool controller",
          "discovery_prefix": "The MQTT topic used by your Tasmota device (found in Tasmota web UI under MQTT settings)"
        }
      },
      "mqtt_confirm": {
        "title": "NeoPool Device Discovered",
        "description": "A NeoPool device was discovered on MQTT topic: **{device}**",
        "data": {
          "device_name": "Device Name"
        }
      },
      "yaml_migration": {
        "title": "YAML Package Migration",
        "description": "Are you migrating from the YAML package configuration?\n\nCheck this box if you're currently using the `ha_neopool_mqtt_package.yaml` file.",
        "data": {
          "migrate_yaml": "Migrating from YAML package"
        }
      },
      "yaml_topic": {
        "title": "MQTT Topic",
        "description": "Could not auto-detect your NeoPool device.\n\nPlease enter the MQTT topic configured in your Tasmota device.",
        "data": {
          "yaml_topic": "MQTT Topic (e.g., SmartPool)"
        }
      },
      "yaml_prefix": {
        "title": "Custom Entity Prefix",
        "description": "No entities found with the default prefix `neopool_mqtt_`.\n\nIf you customized the `unique_id` prefix in your YAML package, enter it below.",
        "data": {
          "unique_id_prefix": "Unique ID Prefix"
        }
      },
      "yaml_active_warning": {
        "title": "YAML Package Still Active",
        "description": "## ⚠️ Cannot Proceed - Entities Still Active\n\nThe following **{active_count}** entities are currently **receiving updates**, which means the YAML package is still running:\n\n{entity_list}\n\n---\n\n## Required Actions:\n\n1. **Remove or comment out** the YAML package from `configuration.yaml`\n2. **Restart Home Assistant** completely\n3. Come back to this screen and click **Retry**\n\n---\n\n⚠️ **Why is this required?**\n\nIf you proceed without removing the YAML package:\n- You will get **duplicate entities** (both YAML and integration entities)\n- Both sets will be active and receiving updates simultaneously\n- This will cause confusion and require manual cleanup\n\nThe migration can only proceed once the YAML entities become **unavailable** (after removing the package and restarting).",
        "data": {}
      },
      "yaml_confirm": {
        "title": "Confirm Migration",
        "description": "## Migration Summary\n\nThe following has been validated:\n\n✓ **MQTT Topic**: `{topic}`\n✓ **NodeID**: `{nodeid}`\n✓ **Migratable entities found**: {entity_count}\n\n### Entities to migrate:\n{entity_list}\n\n---\n\n## What will happen:\n\n1. Each entity's `unique_id` will be updated to include the NodeID\n2. Entities will be associated with this integration\n3. **All historical data will be preserved** (graphs, statistics)\n4. Entity IDs will remain unchanged\n\n---\n\n⚠️ **Prerequisites** (confirm before proceeding):\n- I have removed/commented out the YAML package from `configuration.yaml`\n- I have restarted Home Assistant after removing the YAML package\n- I understand this process will modify my entity registry\n\n**This action cannot be undone automatically.** By checking the box below, you confirm you have completed the prerequisites and accept responsibility for this migration.",
        "data": {
          "confirm_migration": "I confirm I have completed the prerequisites and want to proceed"
        }
      },
      "yaml_migration_result": {
        "title": "Migration Complete",
        "description": "{description}",
        "data": {}
      },
      "discover_device": {
        "title": "Manual Setup",
        "description": "Enter your NeoPool device details.\n\nFor more information, see the [Tasmota NeoPool documentation]({docs_url}).",
        "data": {
          "device_name": "Device Name",
          "discovery_prefix": "MQTT Topic (Tasmota device name)"
        }
      },
      "reconfigure": {
        "title": "Reconfigure NeoPool",
        "description": "Update your NeoPool device connection settings.",
        "data": {
          "device_name": "Device Name",
          "discovery_prefix": "MQTT Topic"
        },
        "data_description": {
          "device_name": "A friendly name for your pool controller",
          "discovery_prefix": "The MQTT topic used by your Tasmota device"
        }
      }
    },
    "error": {
      "invalid_topic": "Invalid MQTT topic format",
      "invalid_yaml_topic": "Cannot read from this MQTT topic. Please verify the topic is correct and the device is online.",
      "cannot_connect": "Could not receive messages from this MQTT topic. Verify the topic name and that your device is online.",
      "no_entities_found": "No migratable entities found with this prefix. Check that:\n1. The prefix matches your YAML configuration\n2. The entities exist in Home Assistant\n3. The entities are not already owned by this integration",
      "confirmation_required": "You must check the confirmation checkbox to proceed with the migration.",
      "yaml_still_active": "Entities are still active. Please remove the YAML package and restart Home Assistant first.",
      "nodeid_configuration_failed": "Failed to configure NodeID on the device."
    },
    "abort": {
      "already_configured": "This device is already configured",
      "invalid_discovery_info": "Invalid discovery information received",
      "not_neopool_device": "The discovered device is not a NeoPool controller",
      "nodeid_configuration_failed": "Failed to configure NodeID. Please manually set SetOption157 1 in Tasmota console and try again.",
      "unique_id_mismatch": "The device NodeID does not match the original configuration."
    }
  },
  "options": {
    "step": {
      "init": {
        "title": "NeoPool Runtime Options",
        "description": "Configure device and runtime options.\n\n**Recovery Script Variables:**\nWhen configured, the recovery script receives these variables:\n\n- `device_name` : Device name\n- `mqtt_topic` : MQTT topic\n- `nodeid` : Device NodeID\n- `failures_count` : Number of consecutive failures",
        "data": {
          "device_name": "Device Name",
          "regenerate_entity_ids": "Regenerate entity IDs",
          "recovery_script": "Recovery script (optional, runs when device stops responding)",
          "enable_repair_notification": "Enable repair notifications",
          "failures_threshold": "Failures before notification (1-10)",
          "offline_timeout": "Offline timeout (seconds)"
        },
        "data_description": {
          "device_name": "Custom name for the device (used in entity names)",
          "regenerate_entity_ids": "Update entity IDs to match the new device name (only when device name changes)",
          "recovery_script": "Script to run when device is offline for too long",
          "enable_repair_notification": "Create a repair issue when device goes offline",
          "failures_threshold": "Number of consecutive LWT offline messages before triggering notifications",
          "offline_timeout": "How long the device must be offline before triggering notifications"
        }
      }
    }
  },
  "issues": {
    "device_offline": {
      "title": "NeoPool device offline: {device_name}",
      "description": "The NeoPool device **{device_name}** has been offline for an extended period.\n\n**MQTT Topic:** `{mqtt_topic}`\n\nPlease check:\n- The Tasmota device is powered on\n- The device is connected to your network\n- The MQTT broker is running\n- The MQTT topic is correct"
    }
  },
  "device_automation": {
    "trigger_type": {
      "device_offline": "Device went offline",
      "device_online": "Device came online",
      "device_recovered": "Device recovered after being offline"
    }
  },
  "entity": {
    "sensor": {
      "system_model": {
        "name": "System Model"
      },
      "water_temperature": {
        "name": "Water Temperature"
      },
      "ph_data": {
        "name": "pH"
      },
      "ph_state": {
        "name": "pH State"
      },
      "ph_pump": {
        "name": "pH Pump"
      },
      "redox_data": {
        "name": "Redox (ORP)"
      },
      "hydrolysis_percent": {
        "name": "Hydrolysis"
      },
      "hydrolysis_data": {
        "name": "Hydrolysis (g/h)"
      },
      "hydrolysis_state": {
        "name": "Hydrolysis State"
      },
      "hydrolysis_runtime_total": {
        "name": "Hydrolysis Runtime Total"
      },
      "hydrolysis_runtime_part": {
        "name": "Hydrolysis Runtime Part"
      },
      "hydrolysis_polarity_changes": {
        "name": "Hydrolysis Polarity Changes"
      },
      "filtration_mode": {
        "name": "Filtration Mode"
      },
      "filtration_speed": {
        "name": "Filtration Speed"
      },
      "powerunit_version": {
        "name": "Powerunit Version"
      },
      "powerunit_5v": {
        "name": "Powerunit 5V"
      },
      "powerunit_12v": {
        "name": "Powerunit 12V"
      },
      "powerunit_24v": {
        "name": "Powerunit 24-30V"
      },
      "powerunit_4ma": {
        "name": "Powerunit 4-20mA"
      },
      "connection_requests": {
        "name": "Connection Requests"
      },
      "connection_responses": {
        "name": "Connection Responses"
      },
      "connection_no_response": {
        "name": "Connection No Response"
      },
      "powerunit_nodeid": {
        "name": "Powerunit NodeID"
      }
    },
    "binary_sensor": {
      "modules_ph": {
        "name": "pH Module"
      },
      "modules_redox": {
        "name": "Redox Module"
      },
      "modules_hydrolysis": {
        "name": "Hydrolysis Module"
      },
      "modules_chlorine": {
        "name": "Chlorine Module"
      },
      "modules_conductivity": {
        "name": "Conductivity Module"
      },
      "modules_ionization": {
        "name": "Ionization Module"
      },
      "relay_ph_state": {
        "name": "Relay pH State"
      },
      "relay_filtration_state": {
        "name": "Relay Filtration State"
      },
      "relay_light_state": {
        "name": "Relay Light State"
      },
      "relay_acid_state": {
        "name": "Relay Acid State"
      },
      "ph_fl1": {
        "name": "pH FL1"
      },
      "hydrolysis_fl1": {
        "name": "Hydrolysis FL1"
      },
      "hydrolysis_water_flow": {
        "name": "Water Flow"
      },
      "ph_tank_level": {
        "name": "pH Tank Level Low"
      },
      "redox_tank_level": {
        "name": "Redox Tank Level Low"
      },
      "hydrolysis_cover": {
        "name": "Hydrolysis Cover"
      },
      "hydrolysis_low_production": {
        "name": "Hydrolysis Low Production"
      }
    },
    "switch": {
      "filtration": {
        "name": "Filtration"
      },
      "light": {
        "name": "Light"
      },
      "aux1": {
        "name": "AUX1"
      },
      "aux2": {
        "name": "AUX2"
      },
      "aux3": {
        "name": "AUX3"
      },
      "aux4": {
        "name": "AUX4"
      }
    },
    "select": {
      "filtration_mode": {
        "name": "Filtration Mode"
      },
      "filtration_speed": {
        "name": "Filtration Speed"
      },
      "boost_mode": {
        "name": "Boost Mode"
      }
    },
    "number": {
      "ph_min": {
        "name": "pH Min"
      },
      "ph_max": {
        "name": "pH Max"
      },
      "redox_setpoint": {
        "name": "Redox Setpoint"
      },
      "hydrolysis_setpoint": {
        "name": "Hydrolysis Setpoint"
      }
    },
    "button": {
      "clear_error": {
        "name": "Clear Error State"
      }
    }
  }
}
